<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proje YÃ¶netimi</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="modal-bg" id="projectModal">
    <div class="modal-card">
        <h2 style="margin-bottom: 20px; color: var(--primary);">âœ¨ Yeni Proje OluÅŸtur</h2>
        <form id="projectForm">
            <label>Proje Ä°smi</label>
            <input type="text" id="pName" placeholder="Ã–rn: Mobil Oyun" required>
            <label>Teknolojiler</label>
            <input type="text" id="pTech" placeholder="Python, C#, Blender">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label>BaÅŸlangÄ±Ã§ Tarihi</label>
                    <div class="flex-row" style="margin-top: 8px;">
                        <input type="date" id="pStartDate" required>
                        <button type="button" class="btn-small" onclick="window.setToday('pStartDate')" style="background: var(--primary); color:black; font-weight:bold;">BugÃ¼n</button>
                    </div>
                </div>
                <div><label>Tahmini BitiÅŸ</label><input type="date" id="pEndDate" style="margin-top:8px;" required></div>
            </div>
            <div style="margin-bottom: 20px;">
                <label>GerÃ§ek BitiÅŸ Tarihi (Opsiyonel)</label>
                <div class="flex-row" style="margin-top: 8px;">
                    <input type="date" id="pRealDate">
                    <button type="button" class="btn-small" onclick="window.setToday('pRealDate')" style="background: rgba(255,255,255,0.1);">BugÃ¼n</button>
                </div>
            </div>
            <div style="margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; display:flex; align-items:center; gap:10px;">
                <input type="checkbox" id="pNoProfit" style="width: 20px; height: 20px; margin:0;">
                <label for="pNoProfit" style="margin:0; cursor: pointer; color: white;"> Hobi Projesi (maddi beklentim yok)</label>
            </div>
            <label>YapÄ±lacaklar Listesi</label>
            <div id="todoInputs" style="margin-bottom: 15px;"></div>
            <button type="button" onclick="window.addTodoInput()" style="background:rgba(255,255,255,0.05); border:1px dashed var(--glass-border); color:var(--text-muted); width:100%; padding:12px; border-radius:12px; cursor:pointer;">+ Ä°ÅŸ Ekle</button>
            <div style="margin-top: 30px; display:flex; gap:15px; justify-content: flex-end;">
                <button type="button" onclick="window.closeModal('projectModal')" style="background:transparent; border:none; color:var(--text-muted); cursor:pointer;">Ä°ptal</button>
                <button type="submit" class="btn-primary" style="padding: 12px 30px;"><span>Kaydet</span></button>
            </div>
        </form>
    </div>
</div>

<div class="modal-bg" id="financeModal">
    <div class="modal-card">
        <h2 id="finModalTitle" style="margin-bottom: 20px; color: var(--success);">ðŸ’° Finans YÃ¶netimi</h2>
        <div id="financeList" style="margin-bottom: 20px; max-height: 200px; overflow-y: auto;"></div>
        <h4 style="color:var(--text-muted); margin-bottom:10px; border-top:1px solid var(--glass-border); padding-top:10px;">Yeni Ä°ÅŸlem Ekle</h4>
        <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px;">
            <input type="text" id="finDesc" placeholder="AÃ§Ä±klama">
            <input type="number" id="finAmount" placeholder="Tutar">
            <select id="finType" style="margin:0; background-color: var(--bg-body); color: white;">
                <option value="income">Gelir (+)</option>
                <option value="expense">Gider (-)</option>
            </select>
        </div>
        <button onclick="window.addFinanceItem()" class="btn-primary" style="width:100%; margin-top:15px; justify-content:center;">Ekle</button>
        <button onclick="window.closeModal('financeModal')" style="width:100%; background:transparent; border:none; color:var(--text-muted); margin-top:10px; cursor:pointer;">Kapat</button>
    </div>
</div>

<div class="modal-bg" id="reportModal">
    <div class="modal-card">
        <h2 style="color: var(--primary); margin-bottom: 20px;"><i class="fa-solid fa-chart-pie"></i> Finansal Rapor</h2>
        <div style="overflow-x: auto;">
            <table class="finance-table">
                <thead><tr><th>Proje AdÄ±</th><th>Gelir</th><th>Gider</th><th>Net Durum</th></tr></thead>
                <tbody id="reportTableBody"></tbody>
            </table>
        </div>
        <button onclick="window.closeModal('reportModal')" style="width:100%; margin-top:20px; background: #333; color: white; padding: 10px; border:none; border-radius:10px; cursor:pointer;">Kapat</button>
    </div>
</div>

<div class="app-container">
    <main class="main-content">
        <header class="top-bar">
            <div><h2 style="font-weight: 300; font-size:1.8rem; margin-bottom: 5px;">Proje YÃ¶netimi</h2><p style="color: var(--text-muted);">Projelerim ile gÃ¼vende.</p></div>
            <button class="btn-primary" onclick="window.openProjectModal()"><i class="fa-solid fa-plus"></i> <span>Yeni Proje</span></button>
        </header>

        <section class="stats-grid">
            <div class="glass-card"><div class="stat-icon"><i class="fa-solid fa-layer-group"></i></div><div class="stat-number" id="totalCount">0</div><div class="stat-label">Toplam Proje</div></div>
            <div class="glass-card clickable-card" onclick="window.openReportModal()"><div class="stat-icon" style="color: var(--success);"><i class="fa-solid fa-wallet"></i></div><div class="stat-number" id="netFinance" style="color: var(--success);">â‚º0</div><div class="stat-label">Net KazanÃ§ (Detay)</div></div>
            <div class="glass-card"><div class="stat-icon" style="color: var(--warning);"><i class="fa-solid fa-bars-progress"></i></div><div class="stat-number" id="activeCount">0</div><div class="stat-label">Devam Eden</div></div>
            <div class="glass-card"><div class="stat-icon" style="color: var(--secondary);"><i class="fa-solid fa-trophy"></i></div><div class="stat-number" id="successRate">%0</div><div class="stat-label">BaÅŸarÄ± OranÄ±</div><div style="width:100%; height:6px; background:rgba(255,255,255,0.1); margin-top:15px; border-radius:10px; overflow:hidden;"><div id="progressBar" style="width:0%; height:100%; background:linear-gradient(90deg, var(--primary), var(--secondary)); border-radius:10px; transition:1s ease-in-out;"></div></div></div>
        </section>

        <div id="loading"><i class="fa-solid fa-spinner fa-spin"></i> Veriler YÃ¼kleniyor...</div>
        <h3 style="margin-bottom: 25px; font-weight: 600; font-size: 1.3rem;">Proje Listesi</h3>
        <div class="projects-wrapper" id="projectsContainer"></div>
    </main>
</div>

<div class="modal-bg" id="priorityModal">
    <div class="modal-card" style="max-width: 400px; text-align: center;">
        <h3 style="color:white; margin-bottom: 20px;">Ã–ncelik Durumu SeÃ§</h3>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button onclick="window.setPriority('acil')" class="priority-btn" style="border-color: var(--danger); color: var(--danger);">
                <i class="fa-solid fa-circle"></i> ACÄ°L
            </button>
            <button onclick="window.setPriority('normal')" class="priority-btn" style="border-color: var(--success); color: var(--success);">
                <i class="fa-solid fa-circle"></i> NORMAL
            </button>
            <button onclick="window.setPriority('rahat')" class="priority-btn" style="border-color: var(--text-muted); color: var(--text-muted);">
                <i class="fa-solid fa-circle"></i> RAHAT
            </button>
        </div>
        <button onclick="window.closeModal('priorityModal')" style="margin-top:20px; background:transparent; border:none; color:#666; cursor:pointer;">Ä°ptal</button>
    </div>
</div>

<div class="modal-bg" id="todoDetailModal">
    <div class="modal-card" style="max-width: 700px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 id="todoDetailTitle" style="color:var(--primary); margin:0;">YapÄ±lacaklar DetayÄ±</h2>
            <button onclick="window.addTodoItemInDetail()" class="btn-small" style="background:var(--success); font-weight:bold;">+ Yeni Ekle</button>
        </div>
        
        <div id="todoDetailList" class="todo-detail-list">
            </div>

        <button onclick="window.closeModal('todoDetailModal')" style="width:100%; margin-top:20px; background: #333; color: white; padding: 12px; border:none; border-radius:10px; cursor:pointer;">Kapat</button>
    </div>
</div>

<div class="modal-bg" id="quickAddTodoModal" style="z-index: 10001;"> <div class="modal-card" style="max-width: 400px;">
        <h3 style="color:var(--primary); margin-bottom: 15px;">Yeni GÃ¶rev Ekle</h3>
        
        <input type="text" id="quickTodoTitle" placeholder="GÃ¶rev BaÅŸlÄ±ÄŸÄ± (Ã–rn: Logo TasarÄ±mÄ±)" style="margin-bottom:10px;">
        
        <textarea id="quickTodoDesc" class="todo-desc-input" placeholder="AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ± detay...)" style="min-height:80px; margin-bottom:20px;"></textarea>
        
        <div style="display:flex; gap:10px; justify-content:flex-end;">
            <button onclick="window.closeModal('quickAddTodoModal')" style="background:transparent; border:none; color:#888; cursor:pointer;">Ä°ptal</button>
            <button onclick="window.submitNewTodo()" class="btn-primary" style="padding: 10px 25px;">Ekle</button>
        </div>
    </div>
</div>

<script type="module" src="app.js"></script>

</body>
</html>